(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin-users"],{"386d":function(e,t,a){"use strict";var r=a("cb7c"),s=a("83a1"),i=a("5f1b");a("214f")("search",1,function(e,t,a,n){return[function(a){var r=e(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,r):new RegExp(a)[t](String(r))},function(e){var t=n(a,e,this);if(t.done)return t.value;var o=r(e),l=String(this),d=o.lastIndex;s(d,0)||(o.lastIndex=0);var c=i(o,l);return s(o.lastIndex,d)||(o.lastIndex=d),null===c?-1:c.index}]})},"53c9":function(e,t,a){},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},e10c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md4:"","mt-4":"","pl-6":""}},[a("v-toolbar-title",[e._v(e._s(e.$t("users.TITLE")))])],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:"","px-4":""}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:e.$t("dataTable.SEARCH"),"single-line":"","hide-details":"",clearable:"","clear-icon":"mdi-close"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:"","text-right":"","mb-2":"","mt-2":"","pr-2":""}},[a("v-dialog",{attrs:{"max-width":"800px","content-class":"dlgNewEditItem"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({staticClass:"btnNewItem pr-6",attrs:{color:"secondary"}},r),[a("v-icon",{staticClass:"mr-2"},[e._v("mdi-plus")]),e._v("\n            "+e._s(e.$t("dataTable.NEW_ITEM"))+"\n          ")],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[e.editedItem._id?[a("v-flex",{attrs:{xs12:"",md4:""}},[a("label",{attrs:{for:"createdAt"}},[e._v(e._s(e.$t("common.CREATED")))]),a("div",{attrs:{name:"createdAt"}},[e._v("\n                      "+e._s(e.getFormat(e.editedItem.createdAt))+"\n                    ")])]),a("v-flex",{attrs:{xs12:"",md4:""}},[a("label",{attrs:{for:"updatedAt"}},[e._v(e._s(e.$t("common.UPDATED")))]),a("div",{attrs:{name:"updatedAt"}},[e._v("\n                      "+e._s(e.getFormat(e.editedItem.updatedAt))+"\n                    ")])]),a("v-flex",{attrs:{xs12:"",md4:""}},[a("label",{attrs:{for:"verified"}},[e._v(e._s(e.$t("users.headers.VERIFIED")))]),a("div",{attrs:{name:"verified"},domProps:{innerHTML:e._s(e.trueFalse(e.editedItem.verified))}})])]:e._e(),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required",expression:"'required'",modifiers:{disable:!0}}],attrs:{id:"name",name:"name",label:e.$t("users.headers.NAME"),"data-vv-as":e.$t("users.headers.NAME"),error:e.errors.has("name"),"error-messages":e.errors.collect("name"),autocomplete:"off"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required|email",expression:"'required|email'",modifiers:{disable:!0}}],attrs:{id:"email",name:"email",type:"email",label:e.$t("users.headers.EMAIL"),"data-vv-as":e.$t("users.headers.EMAIL"),error:e.errors.has("email"),"error-messages":e.errors.collect("email"),autocomplete:"off"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),e.editedItem._id?e._e():[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required|min:5",expression:"'required|min:5'",modifiers:{disable:!0}}],key:"password",ref:"password",attrs:{id:"password",name:"password",type:"password",label:e.$t("users.PASSWORD"),"data-vv-as":e.$t("users.PASSWORD"),error:e.errors.has("password"),"error-messages":e.errors.collect("password"),autocomplete:"off"},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required|min:5|confirmed:password",expression:"'required|min:5|confirmed:password'",modifiers:{disable:!0}}],key:"confirmPassword",attrs:{id:"confirmPassword",name:"confirmPassword",type:"password",label:e.$t("users.CONFIRM_PASSWORD"),"data-vv-as":e.$t("users.PASSWORD"),error:e.errors.has("confirmPassword"),"error-messages":e.errors.collect("confirmPassword"),autocomplete:"off"},model:{value:e.editedItem.confirmPassword,callback:function(t){e.$set(e.editedItem,"confirmPassword",t)},expression:"editedItem.confirmPassword"}})],1)],a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-select",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required",expression:"'required'",modifiers:{disable:!0}}],staticClass:"inputRole",attrs:{clearable:"",id:"role",name:"role",items:e.roles,"item-text":"name","item-value":"value",label:e.$t("users.headers.ROLE"),"data-vv-as":e.$t("users.headers.ROLE"),error:e.errors.has("role"),"error-messages":e.errors.collect("role")},model:{value:e.editedItem.role,callback:function(t){e.$set(e.editedItem,"role",t)},expression:"editedItem.role"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate.disable",value:"required",expression:"'required'",modifiers:{disable:!0}}],staticClass:"inputPlace",attrs:{id:"place",name:"place",label:e.$t("users.headers.PLACE"),"search-input":e.searchInput,items:e.cityPlaces,"item-value":"_id","item-text":"name",clearable:"","data-vv-as":e.$t("users.headers.PLACE"),error:e.errors.has("place"),"error-messages":e.errors.collect("place"),autocomplete:"off"},on:{"update:searchInput":function(t){e.searchInput=t},"update:search-input":function(t){e.searchInput=t}},model:{value:e.editedItem.place,callback:function(t){e.$set(e.editedItem,"place",t)},expression:"editedItem.place"}})],1)],2)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"btnCancel",attrs:{color:"red lighten3",text:""},on:{click:e.close}},[e._v(e._s(e.$t("dataTable.CANCEL")))]),a("v-btn",{staticClass:"btnSave",attrs:{color:"yellow lighten3",text:""},on:{click:e.save}},[e._v(e._s(e.$t("dataTable.SAVE")))])],1)],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{"must-sort":"",loading:e.dataTableLoading,"no-data-text":e.$t("dataTable.NO_DATA"),"no-results-text":e.$t("dataTable.NO_RESULTS"),"footer-props":{"items-per-page-options":[10,20,30,40,50],"items-per-page-text":e.$t("dataTable.ROWS_PER_PAGE")},"items-per-page":20,"server-items-length":e.totalItems,headers:e.headers,items:e.items,options:e.options},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.createdAt",fn:function(t){var a=t.item;return[e._v("\n      "+e._s(e.getFormat(a.createdAt))+"\n    ")]}},{key:"item.updatedAt",fn:function(t){var a=t.item;return[e._v("\n      "+e._s(e.getFormat(a.updatedAt))+"\n    ")]}},{key:"item.action",fn:function(t){var r=t.item;return[a("v-icon",{on:{click:function(t){return e.editItem(r)}}},[e._v("\n        mdi-pencil\n      ")]),a("v-icon",{on:{click:function(t){return e.deleteItem(r)}}},[e._v("\n        mdi-delete\n      ")])]}},{key:"item.role",fn:function(t){var a=t.item;return[e._v("\n      "+e._s(e.roleName(a.role))+"\n    ")]}},{key:"item.verified",fn:function(t){var r=t.item;return[a("div",{domProps:{innerHTML:e._s(e.trueFalse(r.verified))}})]}},{key:"pageText",fn:function(t){return[e._v("\n      "+e._s(t.pageStart)+" - "+e._s(t.pageStop)+" "+e._s(e.$t("dataTable.OF"))+"\n      "+e._s(t.itemsLength)+"\n    ")]}},{key:"no-data",fn:function(){return[e._v(e._s(e.$t("dataTable.NO_DATA")))]},proxy:!0},{key:"no-results",fn:function(){return[e._v(e._s(e.$t("dataTable.NO_RESULTS")))]},proxy:!0}])}),a("ErrorMessage"),a("SuccessMessage")],1)},s=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("386d"),a("bd86")),n=(a("96cf"),a("3b8d")),o=a("2f62"),l=a("fa7d");function d(e,t){var a=Object.keys(e);return Object.getOwnPropertySymbols&&a.push.apply(a,Object.getOwnPropertySymbols(e)),t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach(function(t){Object(i["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var u={metaInfo:function(){return{title:this.$store.getters.appTitle,titleTemplate:"".concat(this.$t("users.TITLE")," - %s")}},data:function(){return{searchInput:"",dataTableLoading:!0,delayTimer:null,dialog:!1,search:"",options:{},editedItem:{},defaultItem:{},fieldsToSearch:["name","email","role","place"]}},computed:{roles:function(){return[{name:this.$t("roles.ADMIN"),value:"admin"},{name:this.$t("roles.USER"),value:"user"}]},cityPlaces:function(){return this.$store.state.place.cityPlaces},formTitle:function(){return this.editedItem._id?this.$t("dataTable.EDIT_ITEM"):this.$t("dataTable.NEW_ITEM")},headers:function(){return[{text:this.$i18n.t("dataTable.ACTIONS"),value:"action",sortable:!1,width:100},{text:this.$i18n.t("users.headers.NAME"),align:"left",sortable:!0,value:"name"},{text:this.$i18n.t("users.headers.EMAIL"),align:"left",sortable:!0,value:"email"},{text:this.$i18n.t("users.headers.ROLE"),align:"left",sortable:!0,value:"role"},{text:this.$i18n.t("users.headers.VERIFIED"),align:"left",sortable:!0,value:"verified"},{text:this.$i18n.t("users.headers.PLACE"),align:"left",sortable:!0,value:"place"},{text:this.$i18n.t("common.CREATED"),align:"left",sortable:!0,value:"createdAt"},{text:this.$i18n.t("common.UPDATED"),align:"left",sortable:!0,value:"updatedAt"}]},items:function(){return this.$store.state.adminUsers.users},totalItems:function(){return this.$store.state.adminUsers.totalUsers}},watch:{dialog:function(e){return!!e||this.close()},options:{handler:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.dataTableLoading=!0,e.next=4,this.getUsers(Object(l["a"])(this.options,this.buildSearch()));case 4:this.dataTableLoading=!1,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.dataTableLoading=!1;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),deep:!0},search:function(){var e=this;clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){e.doSearch()},400)}},methods:c({},Object(o["b"])(["getCityPlaces","getUsers","editUser","saveUser","deleteUser"]),{getFormat:function(e){return window.__localeId__=this.$store.getters.locale,Object(l["g"])(e,"DD.MM.YY hh:mm")},roleName:function(e){return"admin"===e?this.$t("roles.ADMIN"):this.$t("roles.USER")},trueFalse:function(e){return e?'<i aria-hidden="true" class="v-icon mdi mdi-check green--text" style="font-size: 16px;"></i>':'<i aria-hidden="true" class="v-icon mdi mdi-close red--text" style="font-size: 16px;"></i>'},doSearch:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.dataTableLoading=!0,e.next=4,this.getUsers(Object(l["a"])(this.options,this.buildSearch()));case 4:this.dataTableLoading=!1,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.dataTableLoading=!1;case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),buildSearch:function(){return this.search?{query:this.search,fields:this.fieldsToSearch.join(",")}:{}},editItem:function(e){this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$confirm(this.$t("common.DO_YOU_REALLY_WANT_TO_DELETE_THIS_ITEM"),{title:this.$t("common.WARNING"),buttonTrueText:this.$t("common.DELETE"),buttonFalseText:this.$t("common.CANCEL"),buttonTrueColor:"red lighten3",buttonFalseColor:"yellow lighten3"});case 3:if(a=e.sent,!a){e.next=11;break}return this.dataTableLoading=!0,e.next=8,this.deleteUser(t._id);case 8:return e.next=10,this.getUsers(Object(l["a"])(this.options,this.buildSearch()));case 10:this.dataTableLoading=!1;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.dataTableLoading=!1;case 16:case"end":return e.stop()}},e,this,[[0,13]])}));function t(t){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=Object.assign({},e.defaultItem)},300)},save:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$validator.validateAll();case 3:if(t=e.sent,!t){e.next=21;break}if(this.dataTableLoading=!0,!this.editedItem._id){e.next=14;break}return e.next=9,this.editUser(this.editedItem);case 9:return e.next=11,this.getUsers(Object(l["a"])(this.options,this.buildSearch()));case 11:this.dataTableLoading=!1,e.next=19;break;case 14:return e.next=16,this.saveUser({name:this.editedItem.name,email:this.editedItem.email,password:this.editedItem.password,role:this.editedItem.role,place:this.editedItem.place});case 16:return e.next=18,this.getUsers(Object(l["a"])(this.options,this.buildSearch()));case 18:this.dataTableLoading=!1;case 19:return this.close(),e.abrupt("return");case 21:e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](0),this.dataTableLoading=!1,this.close();case 27:case"end":return e.stop()}},e,this,[[0,23]])}));function t(){return e.apply(this,arguments)}return t}()}),mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getCityPlaces();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},m=u,v=(a("e954"),a("2877")),f=a("6544"),h=a.n(f),p=a("c6a6"),b=a("8336"),x=a("b0af"),g=a("99d9"),I=a("a523"),T=a("8fea"),_=a("169a"),w=a("0e8f"),$=a("132d"),E=a("a722"),y=a("b974"),O=a("2fa4"),A=a("8654"),S=a("2a7f"),k=Object(v["a"])(m,r,s,!1,null,null,null);t["default"]=k.exports;h()(k,{VAutocomplete:p["a"],VBtn:b["a"],VCard:x["a"],VCardActions:g["b"],VCardText:g["d"],VCardTitle:g["e"],VContainer:I["a"],VDataTable:T["a"],VDialog:_["a"],VFlex:w["a"],VIcon:$["a"],VLayout:E["a"],VSelect:y["a"],VSpacer:O["a"],VTextField:A["a"],VToolbarTitle:S["c"]})},e954:function(e,t,a){"use strict";var r=a("53c9"),s=a.n(r);s.a}}]);