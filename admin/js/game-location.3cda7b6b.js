(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["game-location"],{"172d":function(t,e,n){"use strict";n.r(e);var c,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md4:"","mt-4":"","pl-6":"","mb-4":""}},[n("v-toolbar-title",[t._v("Локация: "+t._s(t.gamePlace.name)+" "+t._s(t.infoCoord(t.gamePlace.coord))+" "+t._s(t.gamePlace._id))])],1),n("v-flex",{attrs:{xs12:"","text-center":""}},[n("div",{staticClass:"cells"},[n("div",{attrs:{id:"svg"}})])])],1),n("Description",{attrs:{description:"Вы находитесь на карте города."}}),n("p",[t._v("Также как и глобальная карта городов, карта города разделена на ячейки. Количество ячеек города зависит от его уровня. Максимальный уровень города - 10. В таком городе будет 330 ячеек, не считая замка. Поэтому с целью уменьшения трафика и удобства, отображается только небольшой участок. Перемещение по карте такое же как на глобальной карте.")]),n("v-row",[n("v-col",[n("div",{staticStyle:{"text-align":"center"}},[n("img",{attrs:{src:"./img/cells_types.jpg"}})])]),n("v-col",[n("p",[t._v('"0,0,0" - Координаты ячейки. По ним будет удобно ориентироваться при отправке юнитов. Внизу ячейки указан ее номер - "289". Его также можно использовать для отправки юнитов в нужную ячейку.')]),n("p",[t._v('В каждой ячейке отображается три элемента с максимальным количеством ресурсов. Количество элементов для каждой ячейки генерируется случайным образом, но с учетом специфики местности. Полный список материалов доступен при входе в ячейку в меню "Хранилище". По этим данным удобно ориентироваться какую шахту выгоднее установить в ячейке. Если доступные в ячейке ресурсы все добыты или добывать их не выгодно, в такой ячейке можно строить мастерские или прочие производственные и вспомогательные здания.')]),n("p",[t._v('("not rent"|"rented"|"free") - Признаки сдачи ячейки в аренду. ("не сдается"|"сдано"|"свободно"). Параметры аренды обозначают количество монет за день и периодичность оплаты. "5/10" - означает 5 монет в день, периодичность оплаты 10 дней. Кому то может быть удобнее оплачивать раз в день, кому то раз в месяц. Более полная информация о аренде указана в сцене ячейки.')]),n("p",[t._v('"castle", "laboratory", "mine" и прочие - Типы зданий и их уровни, которые построены в данных ячейках.')])])],1),n("ErrorMessage"),n("SuccessMessage")],1)},i=[],o=(n("8e6e"),n("456d"),n("7f7f"),n("7514"),n("6c7b"),n("ac6a"),n("96cf"),n("3b8d")),a=(n("55dd"),n("bd86")),l=n("2f62"),s=n("fa7d"),u=n("3956"),f=n("f916");function h(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(n,!0).forEach(function(e){Object(a["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var p={metaInfo:function(){return{title:this.$store.getters.appTitle,titleTemplate:"%s"}},data:function(){return{cell:null,_Grid:null,_grid:null,_draw:null,_listener:null}},computed:d({},Object(l["c"])(["gamePlace","gameCell","gameCells","user","radius"])),watch:{},methods:d({},Object(l["b"])(["placeJoin","placeMove","placeName","cellSelect","radiusSet"]),(c={infoCoord:s["i"],infoStorage:function(t,e){var n=t?t.map(function(t,e){return{name:Object(s["e"])(t.template-1),val:t.count}}).sort(function(t,e){return e.val-t.val}):[];return e?n.slice(0,e):n},infoBuilding:function(t){if(!t)return"";var e=t.data&&t.data.element?Object(s["e"])(t.data.element-1):"";return"".concat(t.type," ").concat(e," (").concat(t.level,")")}},Object(a["a"])(c,"infoCoord",function(t){return t?"[".concat(t.x,",").concat(t.y,",").concat(t.z,"]"):""}),Object(a["a"])(c,"infoRent",function(t){return Object(s["k"])(t.coord)||!t.amount?"not rent":"".concat(t.amount,"/").concat(t.period," (").concat(t.tenant?"rented":"free",")")}),Object(a["a"])(c,"moveTo",function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.cellSelect(e),t.next=3,this.placeMove({r:this.radius,place:this.gamePlace._id,cell:e._id});case 3:this._grid.forEach(function(t){t.fillContent(n._draw)});case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()),Object(a["a"])(c,"cellJoin",function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.cellSelect(e),this.$router.push({name:"game-cell"});case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()),Object(a["a"])(c,"drawMap",function(){this._draw=Object(u["a"])().addTo("#svg").size("870","800");var t=this,e=Object(f["b"])({size:100,render:function(t){var e=this.toPoint();this.poly=t.polygon(this.corners().map(function(t){var e=t.x,n=t.y;return"".concat(e,",").concat(n)})).fill("none").stroke({width:1,color:"#999"}).translate(e.x,e.y)},fillContent:function(e){var n=this.toPoint(),c=this.center().add(n);this.content&&this.content.length&&this.content.forEach(function(t){t.remove()}),this.content=[];var r=12,i={size:r,anchor:"middle",leading:1.4,fill:"#69c"},o=this.xyz(t.cell?t.cell.coord:null);if(this.content.push(e.text("".concat(o.x,",").concat(o.y,",").concat(o.z)).font(i).translate(c.x,c.y+-5*r)),this.cell=t.gameCells.find(function(t){return t.coord.x==o.x&&t.coord.y==o.y&&t.coord.z==o.z}),this.cell){if(this.cell.building&&this.content.push(e.text("".concat(this.cell.building.type," (").concat(this.cell.building.level,")")).font(i).translate(c.x,c.y+-4*r)),this.content.push(e.text("".concat(t.infoRent(this.cell))).font(i).translate(c.x,c.y+-3*r)),this.cell.storage){var a=t.infoStorage(this.cell.storage,3);a.length&&(this.content.push(e.text("".concat(a[0].name," - ").concat(a[0].val)).font(i).translate(c.x,c.y+1*r)),this.content.push(e.text("".concat(a[1].name," - ").concat(a[1].val)).font(i).translate(c.x,c.y+2*r)),this.content.push(e.text("".concat(a[2].name," - ").concat(a[2].val)).font(i).translate(c.x,c.y+3*r)))}this.content.push(e.text("".concat(this.cell._id)).font(i).translate(c.x,c.y+5*r))}},highlight:function(){this.poly.fill({opacity:1,color:"aquamarine"}).animate(1e3).fill({opacity:0,color:"none"}),console.log("cell",t.cell?t.cell._id:""),console.log("cell",this.cell?this.cell._id:""),t.cell&&this.cell._id===t.cell._id?t.cellJoin(this.cell):t.moveTo(this.cell),t.cell=this.cell},xyz:function(t){var e=this.x-(this.y-(1&this.y))/2-1,n=this.y-2,c=-e-n;return t&&(e+=t.x,c+=t.y,n+=t.z),{x:e,y:c,z:n}}});this._Grid=Object(f["a"])(e),this._grid=this._Grid.hexagon({radius:2,center:[2,2],onCreate:function(e){e.render(t._draw),e.fillContent(t._draw)}}),this._listener=function(e){var n=e.offsetX,c=e.offsetY;console.log("click",n,c);var r=t._Grid.pointToHex([n,c]);console.log("hexCoordinates",r);var i=t._grid.get(r);i&&i.highlight()},u["a"].on(window,"click",this._listener)}),c)),mounted:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.gamePlace._id){t.next=2;break}return t.abrupt("return",this.$router.push({name:"game-map"}));case 2:if(!this.gameCell._id){t.next=8;break}return t.next=5,this.placeMove({r:this.radius,place:this.gamePlace._id,cell:this.gameCell._id});case 5:this.cell=this.gameCell,t.next=10;break;case 8:return t.next=10,this.placeJoin({r:this.radius,place:this.gamePlace._id});case 10:this._grid||this.drawMap();case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),beforeDestroy:function(){console.log("beforeDestroy"),u["a"].off(window,"click",this._listener)}},g=p,m=(n("2744"),n("2877")),v=n("6544"),b=n.n(v),y=n("62ad"),x=n("0e8f"),_=n("a722"),w=n("0fd9"),O=n("2a7f"),j=Object(m["a"])(g,r,i,!1,null,null,null);e["default"]=j.exports;b()(j,{VCol:y["a"],VFlex:x["a"],VLayout:_["a"],VRow:w["a"],VToolbarTitle:O["c"]})},2744:function(t,e,n){"use strict";var c=n("7fdf"),r=n.n(c);r.a},"2f21":function(t,e,n){"use strict";var c=n("79e5");t.exports=function(t,e){return!!t&&c(function(){e?t.call(null,function(){},1):t.call(null)})}},"55dd":function(t,e,n){"use strict";var c=n("5ca1"),r=n("d8e8"),i=n("4bf8"),o=n("79e5"),a=[].sort,l=[1,2,3];c(c.P+c.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!n("2f21")(a)),"Array",{sort:function(t){return void 0===t?a.call(i(this)):a.call(i(this),r(t))}})},"7fdf":function(t,e,n){}}]);