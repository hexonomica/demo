(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["game-building"],{"2a36":function(e,t,a){},7514:function(e,t,a){"use strict";var l=a("5ca1"),r=a("0a49")(5),i="find",n=!0;i in[]&&Array(1)[i](function(){n=!1}),l(l.P+l.F*n,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(i)},ba16:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"","mt-4":"","pl-6":"","mb-4":""}},[a("v-toolbar-title",[e._v("Здание "+e._s(e.gameBuilding.type)+" "+e._s(e.gameBuilding.level))])],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:"","text-center":"","mb-2":"","mt-2":"","pr-2":""}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Задач - "+e._s(e.gameWorks.length+"/"+e.gameBuilding.ticketMax)+" Мест - "+e._s(e.gameWorks.reduce(function(e,t){return e+t.workerMax},0)+"/"+e.gameBuilding.workerMax))])]),a("v-card-text",[a("v-simple-table",{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"}),a("th",{staticClass:"text-left"},[e._v("Тип навыка")]),a("th",{staticClass:"text-left"},[e._v("Доступно работы")]),a("th",{staticClass:"text-left"},[e._v("Занято мест")]),a("th",{staticClass:"text-left"},[e._v("Ставка")])])]),a("tbody",e._l(e.gameWorks,function(t){return a("tr",{key:t._id},[a("td",{staticStyle:{padding:"0"}},[a("v-icon",{on:{click:function(a){return e.startWork(t)}}},[e._v("\n                      mdi-worker\n                    ")])],1),a("td",[e._v(e._s(t.skillType))]),a("td",[e._v(e._s(t.points))]),a("td",[e._v("\n                    "+e._s(t.workers.length+" / "+t.workerMax)+"\n                    "),a("v-icon",{on:{click:function(a){return e.setMaxWork(t)}}},[e._v("\n                      mdi-check-circle-outline\n                    ")])],1),a("td",[e._v("\n                    "+e._s(t.price)+"\n                    "),a("v-icon",{on:{click:function(a){return e.setPriceWork(t)}}},[e._v("\n                      mdi-check-circle-outline\n                    ")])],1)])}),0)]},proxy:!0}])}),a("v-select",{attrs:{clearable:"",id:"unit",name:"unit",items:e.units,"item-text":"name","item-value":"_id",label:"Юнит"},model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}}),a("v-text-field",{attrs:{id:"count",name:"count",label:"Количество",type:"number"},model:{value:e.count,callback:function(t){e.count=t},expression:"count"}})],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm6:"",md3:"","text-right":"","mb-2":"","mt-2":"","pr-2":""}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Новое задание")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:e.gameTemplates,"item-value":"_id","item-text":e.templateName,label:"Шаблон",placeholder:"Select..."},model:{value:e.template,callback:function(t){e.template=t},expression:"template"}})],1),8==e.gameBuilding.type||9==e.gameBuilding.type?a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:e.allFormulas,"item-value":"_id","item-text":e.formulaName,label:"Формула",placeholder:"Select..."},model:{value:e.formula,callback:function(t){e.formula=t},expression:"formula"}})],1):e._e(),3==e.gameBuilding.type?a("div",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-autocomplete",{attrs:{items:e.allElements,"item-value":"_id","item-text":"name",label:"Элемент 1",placeholder:"Select..."},model:{value:e.element1,callback:function(t){e.element1=t},expression:"element1"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{id:"count1",name:"count1",label:"Количество 1",type:"number"},model:{value:e.count1,callback:function(t){e.count1=t},expression:"count1"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-autocomplete",{attrs:{items:e.allElements,"item-value":"_id","item-text":"name",label:"Элемент 2",placeholder:"Select..."},model:{value:e.element2,callback:function(t){e.element2=t},expression:"element2"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{id:"count2",name:"count2",label:"Количество 2",type:"number"},model:{value:e.count2,callback:function(t){e.count2=t},expression:"count2"}})],1)],1)],1):e._e()],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"btnCancel",attrs:{color:"red lighten3",text:""},on:{click:e.createWork}},[e._v("Создать")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm6:"",md9:"","text-right":"","mb-2":"","mt-2":"","pr-2":""}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Новый макет")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-row",[a("v-col",{attrs:{md:"4"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{id:"name",name:"name",label:"Название предмета",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-autocomplete",{attrs:{items:e.allTypes,"item-value":"val","item-text":"key",label:"Тип",placeholder:"Select...",clearable:""},model:{value:e.iType,callback:function(t){e.iType=t},expression:"iType"}}),e.weightWisible?a("v-autocomplete",{attrs:{items:e.allWeights,"item-value":"val","item-text":"key",label:"Вес",placeholder:"Select...",clearable:""},model:{value:e.iWeight,callback:function(t){e.iWeight=t},expression:"iWeight"}}):e._e(),a("v-autocomplete",{attrs:{items:e.allQualities,"item-value":"val","item-text":"key",label:"Качество",placeholder:"Select...",clearable:""},model:{value:e.quality,callback:function(t){e.quality=t},expression:"quality"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md8:""}},[a("v-autocomplete",{attrs:{items:e.allElements,"item-value":"_id","item-text":"name",label:"Элемент 1",placeholder:"Select..."},model:{value:e.element1,callback:function(t){e.element1=t},expression:"element1"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{id:"count1",name:"count1",label:"Количество 1",type:"number"},model:{value:e.count1,callback:function(t){e.count1=t},expression:"count1"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md12:""}},[a("v-autocomplete",{attrs:{items:e.formulaList(null,e.element1,e.count1),"item-value":"_id","item-text":e.formulaName,label:"Формула 1",placeholder:"Select...",clearable:""},model:{value:e.formula1,callback:function(t){e.formula1=t},expression:"formula1"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md12:""}},[a("v-autocomplete",{attrs:{items:e.formulaList(e.formula1),"item-value":"_id","item-text":e.formulaName,label:"Формула 2",placeholder:"Select...",clearable:""},model:{value:e.formula2,callback:function(t){e.formula2=t},expression:"formula2"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md12:""}},[a("v-autocomplete",{attrs:{items:e.formulaList(e.formula2),"item-value":"_id","item-text":e.formulaName,label:"Формула 3",placeholder:"Select...",clearable:""},model:{value:e.formula3,callback:function(t){e.formula3=t},expression:"formula3"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md12:""}},[a("v-autocomplete",{attrs:{items:e.formulaList(e.formula3),"item-value":"_id","item-text":e.formulaName,label:"Формула 4",placeholder:"Select...",clearable:""},model:{value:e.formula4,callback:function(t){e.formula4=t},expression:"formula4"}})],1)],1)],1),a("v-col",{attrs:{md:"8"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-simple-table",{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Параметр")]),a("th",{staticClass:"text-right"},[e._v("По формуле")]),a("th",{staticClass:"text-right"},[e._v("Модификатор")]),a("th",{staticClass:"text-right"},[e._v("Итоговое")])])]),a("tbody",e._l(e.parameterList,function(t,l){return a("tr",{key:l,style:e.styleColor(t)},[a("td",{staticClass:"text-left"},[e._v(e._s(t.name))]),a("td",{staticClass:"text-right"},[e._v(e._s(t.val))]),a("td",{staticClass:"text-right"},[e._v(e._s(t.bal))]),a("td",{staticClass:"text-right"},[e._v(e._s(t.res))])])}),0)]},proxy:!0}])})],1)],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"btnCancel",attrs:{color:"red lighten3",text:""},on:{click:e.createTemplate}},[e._v("Создать")])],1)],1)],1)],1),a("Description",{attrs:{description:"Вы находитесь здании."}}),a("p",[e._v("Все функции тут доступны в основном только для арендатора. Методы и данные отличаются для разных типов зданий. Во всех зданиях кроме Гостиницы и прочих социальных зданий доступен механизм создания задач на работу.")]),a("v-row",[a("v-col",[a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:"/img/building_works.jpg"}})])]),a("v-col",[a("p",[e._v("Таблица задач отображает списко задач, созданных и еще не завершенных в этом здании. Также отображается допустимое количество одновмеренно созданных задач и одновременно работающих юнитов. Для налача работы юнита над задачей необхоидмо указать для нее количество одновременно работающих юнитов и ставку за единицу работы.")]),a("p",[e._v("кнопка Создать - При выполнеии создается новая задача. Для запуска новой задачи необходимо указать шаблон. Если это мастерская инструментов или транспорта, то дополнительно необходимо указать формулу. От формулы будет зависеть какие материалы будут списаны, а также определяется прочность создаваемого предмета.")])])],1),a("v-row",[a("v-col",[a("div",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{src:"/img/new_template.jpg"}})])]),a("v-col",[a("p",[e._v("Форма создания нового шаблона предмета. Созданный шаблон можно использовать для запуска новых задач по созданию предметов.")]),a("p",[e._v("Подробная инструкция по созданию предметов будет описана позже.")])])],1),a("ErrorMessage"),a("SuccessMessage")],1)},r=[],i=(a("8e6e"),a("96cf"),a("3b8d")),n=(a("7f7f"),a("7514"),a("ac6a"),a("456d"),a("bd86")),s=a("2f62"),o=a("fa7d"),c=a("6bfe");function u(e,t){var a=Object.keys(e);return Object.getOwnPropertySymbols&&a.push.apply(a,Object.getOwnPropertySymbols(e)),t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var f={metaInfo:function(){return{title:this.$store.getters.appTitle,titleTemplate:"%s"}},data:function(){return{unit:"",count:"",iClass:"",iType:"",quality:"",iWeight:"",name:"",template:"",formula:"",formula1:"",formula2:"",formula3:"",formula4:"",element1:"",count1:"",element2:"",count2:""}},computed:m({},Object(s["c"])(["gameBuilding","gameCell","gamePlace","user","profileInfo","allFormulas","allElements","allBalances","gameTemplates","gameUnits","gameWorks"]),{units:function(){return this.gameUnits.filter(function(e){return e.type==c["l"].Worker})},weightWisible:function(){return this.gameBuilding.type==c["c"].Weapon||this.gameBuilding.type==c["c"].Armor},allQualities:function(){return Object.keys(c["j"]).map(function(e){return{key:e,val:c["j"][e]}})},allWeights:function(){return Object.keys(c["n"]).map(function(e){return{key:e,val:c["n"][e]}})},parameterList:function(){var e=this,t=[];if(this.formula1){var a=this.allFormulas.filter(function(t){return t._id==e.formula1})[0];if(t=a.params.map(function(e,t){return Math.floor(e*a.effect*1e3)/1e3}),this.formula2){var l=this.allFormulas.filter(function(t){return t._id==e.formula2})[0];if(t=l.params.map(function(e,a){return Math.floor(1e3*(t[a]+e*l.effect))/1e3}),this.formula3){var r=this.allFormulas.filter(function(t){return t._id==e.formula3})[0];if(t=r.params.map(function(e,a){return Math.floor(1e3*(t[a]+e*r.effect))/1e3}),this.formula4){var i=this.allFormulas.filter(function(t){return t._id==e.formula4})[0];t=i.params.map(function(e,a){return Math.floor(1e3*(t[a]+e*i.effect))/1e3})}}}}var n=this.allBalances.find(function(t){return t.iClass==e.iClass&&t.iType==e.iType&&t.iWeight==e.iWeight});return n=n?n.params:[],t=t.map(function(e,t){var a=n[t]||0;return{bal:a,par:c["i"][t].par,type:c["i"][t].type,used:"",name:"".concat(c["i"][t].name),val:e,res:Math.floor(e*a*1e3)/1e3}}),Object(c["e"])(t,this.iClass,this.iType,this.quality),t},allTypes:function(){var e={};return console.log("gameBuilding.type",this.gameBuilding.type),console.log("buildingType.Tailor",c["c"].Tailor),this.gameBuilding.type==c["c"].Weapon?e=c["m"]:this.gameBuilding.type==c["c"].Armor?e=c["a"]:this.gameBuilding.type==c["c"].Tailor?e=c["d"]:this.gameBuilding.type==c["c"].Jewelry&&(e=c["h"]),Object.keys(e).map(function(t){return{key:t,val:e[t]}})}}),watch:{},methods:m({},Object(s["b"])(["buildingJoin","getAllElements","getAllFormulas","getAllBalances","workList","workStart","workSetPrice","workSetMax","workCreate","templateList","templateCreate"]),{getFormat:function(e){return window.__localeId__=this.$store.getters.locale,Object(o["g"])(e,"DD.MM.YY, hh:mm")},formulaName:function(e){return"".concat(Object(o["e"])(e.element1-1)).concat(e.count1).concat(Object(o["e"])(e.element2-1)).concat(e.count2)},templateName:function(e){return"".concat(e.name," - ").concat(e.material)},styleColor:function(e){var t="primary"==e.used?"color:green; ":"secondary"==e.used?"color:blue; ":"color:grey; ";return t+=e.active?"font-weight: bold;":"",t},formulaList:function(e,t,a){if(!e&&!t)return[];if(e){var l=this.allFormulas.filter(function(t){return t._id==e})[0];t=l.element2,a=l.count2}return this.allFormulas.filter(function(e){return e.element1==t&&(""==a||e.count1==a)})},startWork:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("startWork",t),e.next=3,this.workStart({ticket:t._id,unit:this.unit,count:this.count});case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setPriceWork:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("setPriceWork",t),e.next=3,this.workSetPrice({ticket:t._id,price:this.count});case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setMaxWork:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("setMaxWork",t),e.next=3,this.workSetMax({ticket:t._id,count:this.count});case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),createWork:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("createWork",this.template),t={building:this.gameBuilding._id,template:this.template},this.gameBuilding.type==c["c"].Mechanic||this.gameBuilding.type==c["c"].Tools?t.formula=this.formula:this.gameBuilding.type==c["c"].Laboratory&&(t.element1=this.element1,t.count1=this.count1,t.element2=this.element2,t.count2=this.count2),e.next=5,this.workCreate(t);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),createTemplate:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("createTemplate",!0),t={building:this.gameBuilding._id,type:this.iType,quality:this.quality,name:this.name},this.gameBuilding.type!=c["c"].Weapon&&this.gameBuilding.type!=c["c"].Armor||(t.weight=this.iWeight),t.formula1=this.formula1,this.formula2&&(t.formula2=this.formula2),this.formula3&&(t.formula3=this.formula3),this.formula4&&(t.formula4=this.formula4),e.next=9,this.templateCreate(t);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}),mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.gameBuilding._id){e.next=2;break}return e.abrupt("return",this.$router.push({name:"game-map"}));case 2:return e.next=4,this.buildingJoin({building:this.gameBuilding._id});case 4:this.allElements.length||this.getAllElements(),this.getAllFormulas(),this.getAllBalances(),this.workList({place:this.gamePlace._id,cell:this.gameCell._id}),"Castle"!==this.gameBuilding.type&&this.templateList({building:this.gameBuilding._id}),this.gameBuilding.type==c["c"].Weapon?this.iClass=c["f"].Weapon:this.gameBuilding.type==c["c"].Armor?this.iClass=c["f"].Armor:this.gameBuilding.type==c["c"].Tailor?this.iClass=c["f"].Clothing:this.gameBuilding.type==c["c"].Jewelry&&(this.iClass=c["f"].Jewelry);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},p=f,d=(a("de53"),a("2877")),v=a("6544"),h=a.n(v),g=a("c6a6"),x=a("8336"),b=a("b0af"),y=a("99d9"),k=a("62ad"),_=a("a523"),w=a("0e8f"),C=a("132d"),B=a("a722"),W=a("0fd9"),O=a("b974"),j=a("1f4f"),T=a("2fa4"),S=a("8654"),M=a("2a7f"),V=Object(d["a"])(p,l,r,!1,null,null,null);t["default"]=V.exports;h()(V,{VAutocomplete:g["a"],VBtn:x["a"],VCard:b["a"],VCardActions:y["b"],VCardText:y["d"],VCardTitle:y["e"],VCol:k["a"],VContainer:_["a"],VFlex:w["a"],VIcon:C["a"],VLayout:B["a"],VRow:W["a"],VSelect:O["a"],VSimpleTable:j["a"],VSpacer:T["a"],VTextField:S["a"],VToolbarTitle:M["c"]})},de53:function(e,t,a){"use strict";var l=a("2a36"),r=a.n(l);r.a}}]);